{"version":3,"sources":["targets/PlatformSelector.ts"],"names":[],"mappings":";;;;;;;;;;AAMA;IAGI;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,GAAG,EAAqB,CAAC;IACpD,CAAC;IAEY,YAAY,CAAC,IAAY;;YAClC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC7B,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACtC,CAAC;YAED,MAAM,GAAG,GAAG,IAAI,cAAc,EAAE,CAAC;YACjC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,wCAAwC,IAAI,GAAG,EAAE,IAAI,CAAC,CAAC;YACvE,GAAG,CAAC,YAAY,GAAG,MAAM,CAAC;YAE1B,MAAM,CAAC,IAAI,OAAO,CAAY,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;gBAC/C,GAAG,CAAC,MAAM,GAAG,CAAC,EAAO,EAAE,EAAE;oBACrB,MAAM,MAAM,GAAG;wBACX,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAI;wBACvB,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,WAAW;qBACxC,CAAC;oBACF,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;oBACnC,OAAO,CAAC,MAAM,CAAC,CAAC;gBACpB,CAAC,CAAC;gBACF,GAAG,CAAC,IAAI,EAAE,CAAC;YACf,CAAC,CAAC,CAAC;QACP,CAAC;KAAA;CACJ;AA5BD,4CA4BC","file":"PlatformSelector.js","sourcesContent":["\nexport interface IPlatform {\n    name: string;\n    productCode: string;\n}\n\nexport class PlatformSelector {\n    private deviceCache: Map<string, IPlatform>;\n\n    constructor() {\n        this.deviceCache = new Map<string, IPlatform>();\n    }\n\n    public async lookupDevice(code: string) {\n        if (this.deviceCache.has(code)) {\n            return this.deviceCache.get(code);\n        }\n\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"get\", `https://os.mbed.com/api/v3/platforms/${code}/`, true);\n        xhr.responseType = \"json\";\n\n        return new Promise<IPlatform>((resolve, _reject) => {\n            xhr.onload = (_e: any) => {\n                const device = {\n                    name: xhr.response.name,\n                    productCode: xhr.response.productcode,\n                };\n                this.deviceCache.set(code, device);\n                resolve(device);\n            };\n            xhr.send();\n        });\n    }\n}\n"],"sourceRoot":"../../src"}